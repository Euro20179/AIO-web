<template id="display-entry">
<style>
@import "/ui/templates/display-entry.css";
</style>

<style id="custom-styles">
</style>

<dialog id="template-editor-container" style="font-size: 1rem;">
    <h2 style="font-size: revert;" class="center">Template editor</h2>
    <div class="flex j-center">
        <button entry-action="save">üíæÔ∏é</button>
        <button entry-action="previewtemplate" title="preview the template">üëÅ</button>
    </div>
    <textarea id="template-editor" style="width: initial; height: initial;" rows="30" cols="80"></textarea>
</dialog>

<dialog id="template-preview" style="font-size: 1rem; width: 80vw;"></dialog>

<dialog id="notes-edit-dialog" popover>
    <button onclick="closeModalUI('notes-edit-dialog', this.getRootNode())"
        style="position: absolute; top: 1ch; right: 1ch;">X</button>
    <p class="center">Notes save automatically</p>
    <textarea id="notes-edit-box" rows="10" cols="80"></textarea>
</dialog>

<dialog id="item-identification-form" popover>
    <button style="position: absolute; top: 0; right: 0"
        onclick="closeModalUI('item-identification-form', this.getRootNode())">X</button>
    <form onsubmit="itemIdentification(this)" action="javascript:void(0)">
        <select name="provider" required>
            <option value="anilist">Anilist</option>
            <option value="omdb">open movie database (omdb)</option>
            <option value="openlibrary">open library ISBN lookup</option>
            <option value="googlebooks">google books search</option>
            <option value="sonarr">sonarr</option>
            <option value="radarr">radarr</option>
            <option value="steam">steam</option>
        </select>
        <select name="query-type" required>
            <option value="by-title">By title</option>
            <option value="by-id">By id</option>
        </select>
        <input type="search" name="search" placeholder="search/id (id must be numeric)" required>
    </form>
    <p>
        A search can be made by title or by id.
    <p>
        the id is different depending on which provider is chosen.
    <p>
        the id that should be used is the id for that provider. For example, the id for steam should be the appid of the
        steam game you want.
    <p>
        the id MUST be an int, (I hope to fix this later), as a consequence the id for omdb is the imdb id with the tt
        prefix removed.
</dialog>

<dialog id="identify-items" popover>
</dialog>

<dialog id="display-info-object-editor-popup" popover style="width: 80vmin; aspect-ratio: 1 / 1;">
    <div class="flex j-center" style="gap: var(--small-gap);">
        <button id="save-object-editor" style="align-self: center; height: fit-content;"
            entry-action="saveobject">üíæÔ∏é</button>
        <h3 class="center">Object Editor</h3>
    </div>
    <div class="center">
        <select id="current-edited-object">
            <option value="entry">entry info</option>
            <option value="user">user info</option>
            <option value="meta">meta info</option>
            <option value="user-extra">User Extra</option>
            <option value="meta-datapoints">Metadata Datapoints</option>
            <option value="meta-media-dependant">Metadata Media Dependant</option>
            <option value="aio-web">AIO Web entry options</option>
        </select>
    </div>
    <table id="display-info-object-tbl" style="width: 100%;">
        <tr>
            <th style="position: relative;"><button entry-action="newobjectfield" style="position: absolute; left: 0"
                id="new-user-extra-field">+</button> Name</th>
            <th>value</th>
        </tr>
    </table>
</dialog>

<div class="root" id="root">
    <details class="hamburger-menu" style="
            display: flex;
            flex-direction: column;
            float: right;
            margin-inline: var(--small-gap);
        ">
        <summary>Actions</summary>
        <menu aria-label="item interactions" class="m-0" id="item-interaction-menu">
            <!-- this gets filled with de_item_interaction settings -->
        </menu>
    </details>

    <div id="menu-bar">
        <menu aria-label="item type and format" class="flex" style="margin: 0; padding: 0;">
            <select id="type-selector" entry-action="settype" entry-action-trigger="change" class="center"
                style="min-width: 50px;"> </select>
            <select id="format-selector" title="Format type" entry-action="setformat" entry-action-trigger="change"
                class="center" style="min-width: 50px;"></select>
            <div style="align-content: center;" class="flex">
                <input type="checkbox" placeholder="digitized" entry-action="setdigitization" id="format-digitized"
                    style="aspect-ratio: 1; height: 10px; align-self: center;">
                <label for="format-digitized"
                    title="Whether or not the item is a digitized/digital version of the format"
                    style="align-self: center;">Digitized </label>
            </div>
            <div id="art-selectors" class="grid" style="grid-auto-flow: column; overflow: auto;">
                <label for="is-Anime"><input type="checkbox" id="is-Anime" entry-action="toggleartstyle" entry-action-trigger="change">
                    Anime</label>
                <label for="is-Cartoon"><input type="checkbox" id="is-Cartoon" entry-action="toggleartstyle" entry-action-trigger="change">
                    Cartoon</label>
                <label for="is-Handdrawn"><input type="checkbox" id="is-Handdrawn" entry-action="toggleartstyle" entry-action-trigger="change">
                    Hand drawn</label>
                <label for="is-Digital"><input type="checkbox" id="is-Digital" entry-action="toggleartstyle" entry-action-trigger="change">
                    Digitally drawn </label>
                <label for="is-CGI"><input type="checkbox" name="is-CGI" id="is-cgi" entry-action="toggleartstyle" entry-action-trigger="change"> Cgi</label>
                <label for="is-2D"><input type="checkbox" name="is-2D" id="is-2D" entry-action="toggleartstyle" entry-action-trigger="change"> 2D</label>
                <label for="is-3D"><input type="checkbox" name="is-3D" id="is-3D" entry-action="toggleartstyle" entry-action-trigger="change"> 3D</label>
                <label for="is-Liveaction"><input type="checkbox" id="is-Liveaction" entry-action="toggleartstyle" entry-action-trigger="change"> Live action</label>
            </div>
        </menu>
    </div>

    <figure class="thumbnail-fig flex column" id="thumbnail-fig">
        <!-- <div class="grid" style="grid-auto-flow: column; grid-template-columns: repeat(auto-fit, minmax(3ch, 1fr));"> -->
        <!-- </div> -->
        <input type="file" hidden id="thumbnail-file-upload">
        <hgroup class="flex column center">
            <h1 class="m-0 title center" id="main-title"></h1>
            <div class="flex wrap j-center" style="gap: var(--small-gap);">
                <h3 class="m-0 center official-native-title" id="official-native-title"></h3>
                <h4 class="m-0" id="on-format"></h4>
            </div>
            <h4 class="m-0" put-data="ReleaseYear" put-data-fallback="" style="align-self: center;"></h4>
            <div style="justify-content: center; gap: 1ch; font-size: 0.9em;" class="flex">
                <button class="rating styleless-button" id="user-rating" entry-action="setrating"
                    title="your rating">??</button>
                <span>(<span class="audience-rating" id="audience-rating" title="audience rating">??</span>)</span>
                <button class="cost styleless-button" id="cost"></button>
            </div>
        </hgroup>
        <button class="styleless-button" entry-action="setthumbnail">
            <img src="" alt="" class="thumbnail" id="thumbnail">
        </button>
        <table class="media-info" id="media-info"></table>
        <input
            put-data="Location"
            put-data-mode="value"
            placeholder="item location"
            oncontextmenu="if(event.ctrlKey) { open(this.value, '_blank'); } else {this.select()} event.preventDefault()">
        <div class="header-subtitle" id="header-subtitle">
            <textarea
                id="style-editor"
                entry-action="save"
                entry-action-trigger="change"
                hidden rows="80" cols="80"
            ></textarea>
        </div>
    </figure>

    <div>
        <div id="misc-info" class="flex row wrap j-center">
            <de-cost-calculation-modifiers>
            </de-cost-calculation-modifiers>

            <div class="tables flex column" id="event-table-area"
                style="flex-grow: 1; justify-content: center; display: flow-root; align-self: center;">
                <table class="user-actions" id="user-actions"></table>
            </div>

            <div style=" width: min-content; height: fit-content; flex-grow: 0.5; align-self: center;">
                <button id="view-count" class="view-count center styleless-button" style="margin-top: 0; width: 100%; display: block;" entry-action="setviewcount"
                    put-data="ViewCount"></button>

                <figure class="entry-progress">
                    <div class="viewing relative">
                        <div id="multiple-progress">
                        </div>
                    </div>
                </figure>

                <de-status-menu></de-status-menu>
            </div>
        </div>
    </div>

    <!-- <div class="descriptors" id="descriptors"> -->
    <section>
        <hr>
        <de-notes></de-notes>
    </section>

    <section>
        <hr>
        <de-description></de-description>
    </section>
    <!-- </div> -->
    <!-- <div id="relationship-display"> -->

    <div id="relationship-display">
        <section id="required-section">
            <button entry-action="setrequired" style="width: 100%;"><h4 class="center m-0">Required</h4></button>
            <div id="required-items" class="flex wrap">
                <img id="required-item" src>
            </div>
        </section>

        <hr>

        <section class="descendants" id="descendants-section">
            <div>
                <h4 class="center">Children</h4>
                <button id="new-child" title="Create new item as a child of this">+</button>
                <button id="new-child-by-id" entry-action="selectnewchild">Add Existing</button>
            </div>
            <div id="descendants">
            </div>
        </section>

        <hr>

        <section class="copies" id="copies-section">
            <div>
                <h4 class="center">Copies</h4>
                <button id="new-copy" title="Create new item as a copy of this">+</button>
                <button id="copy-from-this" title="Create a new item that is an exact copy of this"
                    entry-action="copythis">Copy
                    this</button>
            </div>
            <div id="copies">
            </div>
        </section>
    </div>
    <!-- </div> -->
</div>

<template id="tag">
    <div>
        <button class="delete" id="delete-tag">üóë</button>
        <button class="tag" id="tag-name"></button>
    </div>
</template>
</template>
