const modes=[modeDisplayEntry,modeGraphView,modeCalc,modeGallery],modeOutputIds=["entry-output","graph-output","calc-output","gallery-output"];let idx=modeOutputIds.indexOf(location.hash.slice(1)),mode=modes[idx];function selectItem(e,t,l=!0){globalsNewUi.selectedEntries.push(e),t.add(e,l)}function deselectItem(e,t=!0){globalsNewUi.selectedEntries=globalsNewUi.selectedEntries.filter(l=>l.ItemId!==e.ItemId),mode.sub(e,t)}function selectItemList(e,t,l=!0){globalsNewUi.selectedEntries=globalsNewUi.selectedEntries.concat(e),t.addList(e,l)}function toggleItem(e,t=!0){globalsNewUi.selectedEntries.find(l=>l.ItemId===e.ItemId)?deselectItem(e,t):selectItem(e,mode,t)}function clearItems(){mode.subList(globalsNewUi.selectedEntries),globalsNewUi.selectedEntries=[]}function putSelectedToCollection(){mode.putSelectedInCollection?mode.putSelectedInCollection():alert("This mode does not support putting items into a collection")}function addTagsToSelected(){mode.addTagsToSelected?mode.addTagsToSelected():alert("This mode does not support adding tags to selected items")}document.getElementById("view-toggle")?.addEventListener("change",e=>{mode.subList(globalsNewUi.selectedEntries);let t=e.target.value,l=modeOutputIds.indexOf(t);mode=modes[l],location.hash=t,mode.addList(globalsNewUi.selectedEntries)});const viewAllElem=document.getElementById("view-all");viewAllElem.addEventListener("change",e=>{clearItems(),e.target?.checked?selectItemList(globalsNewUi.results,mode):resultStatsProxy.reset()});
